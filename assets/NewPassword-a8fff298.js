import{_ as h,o as i,c as d,a as o,d as c,v as l,t as p,f as u,p as w,g as _}from"./index-b58b0c5a.js";const m={data(){return{messageError:"",password:"",confirmPassword:"",isOk:!1,token:"",checkResetToken:[]}},created(){this.token=this.$route.params.token},methods:{checkToken(){fetch("http://localhost:5000/users").then(e=>{if(e.ok)return e.json();throw new Error("Erro en la solucitud")}).then(e=>{this.checkResetToken=e.filter(s=>s.reset_token),this.checkResetToken.length==0&&(alert("El Token para el cambio de contraseña ha expirado."),this.$router.push({name:"login"}))}).catch(e=>{console.error("Error: ",e)})},validarPass(){if(this.msjError="",this.password){if(this.password.length<=8||!/[A-Z]/.test(this.password)){this.messageError="La contraseña debe tener más de 8 caracteres y mayúscula.";return}else this.messageError="";this.password!==this.confirmPassword?this.messageError="Las contraseñas no coinicen.":(this.messageError="",this.isOk=!0)}},resetPassword(){const e=this.password;fetch(`http://localhost:5000/new-password/${this.token}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}).then(s=>{s.ok&&(this.token="",this.$router.push({name:"login"}))}).catch(s=>{console.error("Error:",s)})}},mounted(){this.checkToken()}},n=e=>(w("data-v-50734551"),e=e(),_(),e),f={class:"wrapper"},k={class:"container"},v={class:"container-password"},g=n(()=>o("h2",null,"Restablecer Contraseña",-1)),P={class:"form-group"},E=n(()=>o("label",{for:"password"},"Nueva Contraseña",-1)),b={class:"form-group"},y=n(()=>o("label",{for:"confirmPassword"},"Confirmar Contraseña",-1)),T=["disabled"],C={class:"verification"},x={key:0};function N(e,s,S,I,r,a){return i(),d("div",f,[o("div",k,[o("div",v,[g,o("form",null,[o("div",P,[E,c(o("input",{type:"password",id:"password","onUpdate:modelValue":s[0]||(s[0]=t=>r.password=t),required:""},null,512),[[l,r.password]])]),o("div",b,[y,c(o("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[1]||(s[1]=t=>r.confirmPassword=t),required:"",onInput:s[2]||(s[2]=(...t)=>a.validarPass&&a.validarPass(...t))},null,544),[[l,r.confirmPassword]])]),o("button",{type:"button",class:"btn",onClick:s[3]||(s[3]=(...t)=>a.resetPassword&&a.resetPassword(...t)),disabled:!r.isOk},"Restablecer Contraseña",8,T),o("div",C,[r.messageError?(i(),d("p",x,p(r.messageError),1)):u("",!0)])])])])])}const R=h(m,[["render",N],["__scopeId","data-v-50734551"]]);export{R as default};
