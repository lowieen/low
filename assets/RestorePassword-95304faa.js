import{_ as u,o as l,c as n,a as i,d as h,v as p,i as _,t as c,f as m,n as E,p as v,g as f}from"./index-b58b0c5a.js";const g={data(){return{email:"",isEmailValid:!1,allUsers:[],messageError:"",msjBtn:"Continuar",isLoading:!1}},methods:{validarEmail(){const o=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;this.isEmailValid=o.test(this.email)},isOkEmail(){this.isLoading=!0,fetch("http://127.0.0.1:5000/users").then(e=>{if(e.ok)return e.json();throw new Error("Error en la solicitud")}).then(e=>{this.allUsers=e,this.allUsers.some(a=>a.email==this.email)?this.sendEmail(this.email):this.messageError="El correo electrónico ingresado es incorrecto o no está registrado."}).catch(e=>{console.error("Error: ",e)})},sendEmail(o){const e={email:o};let a="http://localhost:5000/restablecer-contrasena";var d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(a,d).then(s=>{if(s.ok)return this.isLoading=!1,this.msjBtn="Correo Enviado!",s.json();throw new Error("Error en la solicitud")}).catch(s=>{console.error("Error: ",s)})}}},k=o=>(v("data-v-2eba8a13"),o=o(),f(),o),y={class:"wrapper"},b={class:"container"},w={class:"container-correo"},j=k(()=>i("div",null,[i("h2",null,"Ingresa tu Correo Electrónico")],-1)),C={key:0,class:"verification"},B={class:"container-btn"},O=["disabled"],I={key:0,class:"loader"};function S(o,e,a,d,s,r){return l(),n("div",y,[i("div",b,[i("div",w,[j,i("div",null,[h(i("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),required:"",onInput:e[1]||(e[1]=(...t)=>r.validarEmail&&r.validarEmail(...t)),placeholder:"ejemplo@gmail.com",onKeyup:e[2]||(e[2]=_((...t)=>r.isOkEmail&&r.isOkEmail(...t),["enter"]))},null,544),[[p,s.email]]),s.messageError?(l(),n("div",C,c(s.messageError),1)):m("",!0)]),i("div",B,[i("button",{class:E(["btn",{success:s.msjBtn!=="Continuar"}]),type:"button",onClick:e[3]||(e[3]=(...t)=>r.isOkEmail&&r.isOkEmail(...t)),disabled:!s.isEmailValid},c(s.msjBtn),11,O),s.isLoading?(l(),n("div",I)):m("",!0)])])])])}const x=u(g,[["render",S],["__scopeId","data-v-2eba8a13"]]);export{x as default};
