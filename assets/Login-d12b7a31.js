import{_,r as v,o as m,c as u,a as e,h as E,d,v as g,n as h,t as c,f as p,i as R,b as k,w as x,j as y,F as P,e as U,k as b,p as L,g as w}from"./index-b58b0c5a.js";const f="/low/assets/android-chrome-192x192-3a83eee7.png";const O={data(){return{animatedBoxes:[],xOffset:0,shadow:"-20px 0 25px rgba(0, 0, 0, 0.5)",valuePosition:0,userLogin:null,passLogin:null,emailRegister:null,userRegister:null,passRegister:null,rPassRegister:null,checkbox:!1,isValidEmail:null,isUser:[],isOkUser:!1,isEmail:[],isOkEmail:!1,msjErrEmail:"",msjErrUser:"",msjErrPass:"",msjErrPass2:"",registrationCompleted:!1,msjBtn:"Registrarme",msjErrAutEmail:"",msjErrAutPass:"",msjErrorAut:""}},methods:{toLogin(){this.xOffset=0,this.shadow="-20px 0 25px rgba(0, 0, 0, 0.5)",this.valuePosition+=100},toRegister(){this.xOffset=50,this.shadow="20px 0 25px rgba(0, 0, 0, 0.5)",this.valuePosition-=100},animateBox(){const o=Math.floor(Math.random()*100)+1;this.animatedBoxes.includes(o)||(this.animatedBoxes.push(o),setTimeout(()=>{this.animatedBoxes=this.animatedBoxes.filter(s=>s!==o)},2e3))},validationEmail(){this.emailRegister&&(this.isOkEmail=!0)},validationUser(){this.userRegister&&(this.isOkUser=!0)},validationPass(){if(this.passRegister){if(this.passRegister.length<=8||!/[A-Z]/.test(this.passRegister)){this.msjErrPass="La contraseña debe tener más de 8 caracteres y mayúscula.";return}else this.msjErrPass="";this.passRegister!==this.rPassRegister?this.msjErrPass2="Las contraseñas no coinicen.":this.msjErrPass2=""}},register(){if(this.emailRegister){const o=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;this.isValidEmail=o.test(this.emailRegister),this.isValidEmail?(this.msjErrEmail="",fetch("http://localhost:5000/users").then(s=>{if(s.ok)return s.json();throw new Error("Error en la solicitud")}).then(s=>{if(this.isEmail=s.filter(a=>a.email===this.emailRegister),this.isEmail.length!==0){this.msjErrEmail="Este email ya existe.",this.isOkEmail=!1;return}else this.msjErrEmail="",this.isOkEmail=!0,this.isValidEmail=null}).catch(s=>{console.error("Error: ",s)})):this.msjErrEmail="Email ingresado incorrecto."}else{this.msjErrEmail="Completa el campo por favor.",this.isOkEmail=!1;return}if(this.userRegister.includes(" ")){this.msjErrUser="El usuario no puede contener espacios.";return}else if(this.userRegister)fetch("http://localhost:5000/users").then(o=>{if(o.ok)return o.json();throw new Error("Error en la solicitud")}).then(o=>{if(this.isUser=o.filter(s=>s.user===this.userRegister),this.isUser.length!==0){this.msjErrUser="Este usuario ya existe.",this.isOkUser=!1;return}else this.msjErrUser="",this.isOkUser=!0,this.newUser()}).catch(o=>{console.error("Error: ",o)});else{this.msjErrUser="Completa el campo por favor.",this.isOkUser=!1;return}},newUser(){const o={email:this.emailRegister,user:this.userRegister,pass:this.passRegister},s="http://localhost:5000/users",a={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(o)};this.isOkEmail&&this.isOkUser&&fetch(s,a).then(r=>{if(r.ok)return this.registrationCompleted=!0,this.msjBtn="Registro Completado!",this.createProfile(this.emailRegister),setTimeout(()=>{this.emailRegister="",this.userRegister="",this.passRegister="",this.rPassRegister="",this.checkbox=!1,this.msjBtn="Registrarme",this.registrationCompleted=!1,this.toLogin()},1e3),r.json();throw new Error("Error en la solicitud")}).catch(r=>{console.error("Error: ",r)})},verificationLogin(){if(!this.userLogin)this.msjErrAutEmail="Introduce tu Email o User, por favor.";else if(!this.passLogin)this.msjErrAutPass="Introduce la contraseña, por favor.";else{const o=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;this.isValidEmail=o.test(this.userLogin);let s=null,a=null;this.isValidEmail?fetch("http://localhost:5000/users").then(r=>(r.ok,r.json())).then(r=>{r&&r.error?this.msjErrAutEmail="Email o Usuario incorrecto.":(a=r.filter(n=>n.email==this.userLogin)[0].user,s={email:null,user:a,password:this.passLogin},this.login(s))}):(s={email:null,user:this.userLogin,password:this.passLogin},this.login(s))}},login(o){const s="http://localhost:5000/logs",a={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(o)};fetch(s,a).then(r=>{if(r.ok)return r.json();if(r.status===400)return r.json();throw new Error("Error en la solicitud")}).then(r=>{if(r&&r.error)this.userLogin="",this.passLogin="",this.msjErrorAut=r.error;else{const i={user:o.user,user_id:r.id};this.$store.dispatch("userLogIn",i),this.$router.push({name:"home"}),this.userLogin="",this.passLogin=""}}).catch(r=>{console.error("Error: ",r)})},isNotNull(o){o==="user"?this.msjErrAutEmail="":this.msjErrAutPass=""},createProfile(o){const s="http://localhost:5000/profiles",a={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:o})};fetch(s,a).then(r=>{if(r.ok)return r.json();if(r.status===400)return r.json();throw new Error("Erro en la solicitud.")}).then(r=>{r&&r.error&&console.log(r.error)}).catch(r=>{console.error("Error: ",r)})}},mounted(){setInterval(this.animateBox,50)},computed:{validationRegister(){return this.isOkEmail&&this.isOkUser&&this.passRegister!==""&&this.rPassRegister!==""&&this.rPassRegister==this.passRegister&&this.checkbox}}},l=o=>(L("data-v-fe80fe68"),o=o(),w(),o),A={class:"wrapper"},C={class:"container-form"},B=l(()=>e("div",{class:"container-elem image"},[e("img",{src:f,alt:"logo"})],-1)),V=l(()=>e("div",{class:"container-elem"},[e("h3",null,"Iniciar Sesión")],-1)),N={class:"container-elem inputs"},S=l(()=>e("label",{for:"user"},"Email/User",-1)),I={key:0,class:"msjErr"},T={class:"container-elem inputs"},z=l(()=>e("label",{for:"pass"},"Contraseña",-1)),Z={key:0,class:"msjErr"},M={class:"container-elem changePass"},J={class:"container-elem"},D={key:0,class:"msjErr"},F={class:"container-elem toRegister"},K=l(()=>e("p",null,"No tenes una cuenta?",-1)),Y=l(()=>e("div",{class:"container-elem image"},[e("img",{src:f,alt:"logo"})],-1)),q=l(()=>e("div",{class:"container-elem"},[e("h3",null,"Registrarme")],-1)),G={class:"container-elem inputs"},H=l(()=>e("label",{for:"user"},"Email",-1)),Q={key:0,class:"msjErr"},W={class:"container-elem inputs"},X=l(()=>e("label",{for:"user"},"User",-1)),$={key:0,class:"msjErr"},ss={class:"container-elem inputs"},es=l(()=>e("label",{for:"pass"},"Contraseña",-1)),is={key:0,class:"msjErr"},ts={class:"container-elem inputs"},rs=l(()=>e("label",{for:"pass"},"Repita la contraseña",-1)),os={key:0,class:"msjErr"},ns={class:"container-elem terms"},ls=l(()=>e("label",{for:"terms"},"Acepto todos los terminos y condiciones.",-1)),as={class:"container-elem"},ms=["disabled"],us={class:"container-elem toRegister"},hs=l(()=>e("p",null,"Ya tenes una cuenta?",-1)),cs=l(()=>e("p",null,"Una nueva forma de experimentar tu estado real en el infinito espacio virtual.",-1)),ds=l(()=>e("p",null,"Conócenos más.",-1)),ps=[cs,ds];function gs(o,s,a,r,i,n){const j=v("router-link");return m(),u("div",A,[e("div",C,[e("div",{class:"container login",style:E({left:i.valuePosition+"%"})},[B,V,e("div",N,[S,d(e("input",{type:"text",name:"user","onUpdate:modelValue":s[0]||(s[0]=t=>i.userLogin=t),class:h({isError:i.msjErrAutEmail}),onInput:s[1]||(s[1]=t=>n.isNotNull("user"))},null,34),[[g,i.userLogin]]),i.msjErrAutEmail?(m(),u("p",I,c(i.msjErrAutEmail),1)):p("",!0)]),e("div",T,[z,d(e("input",{type:"password",name:"pass","onUpdate:modelValue":s[2]||(s[2]=t=>i.passLogin=t),class:h({isError:i.msjErrAutPass}),onInput:s[3]||(s[3]=(...t)=>n.isNotNull&&n.isNotNull(...t)),onKeyup:s[4]||(s[4]=R((...t)=>n.verificationLogin&&n.verificationLogin(...t),["enter"]))},null,34),[[g,i.passLogin]]),i.msjErrAutPass?(m(),u("p",Z,c(i.msjErrAutPass),1)):p("",!0),e("div",M,[k(j,{to:{name:"restore-password"}},{default:x(()=>[b("Olvide la contraseña")]),_:1})])]),e("div",J,[e("button",{type:"button",class:"btn",onClick:s[5]||(s[5]=(...t)=>n.verificationLogin&&n.verificationLogin(...t))},"Iniciar Sesión"),i.msjErrorAut?(m(),u("p",D,c(i.msjErrorAut),1)):p("",!0)]),e("div",F,[K,e("a",{onClick:s[6]||(s[6]=(...t)=>n.toRegister&&n.toRegister(...t))},"Registrate!")])],4),e("div",{class:"container register",style:E({left:i.valuePosition+100+"%"})},[Y,q,e("div",G,[H,d(e("input",{type:"email",name:"user","onUpdate:modelValue":s[7]||(s[7]=t=>i.emailRegister=t),onBlur:s[8]||(s[8]=(...t)=>n.validationEmail&&n.validationEmail(...t)),class:h({isError:i.msjErrEmail})},null,34),[[g,i.emailRegister]]),i.msjErrEmail?(m(),u("p",Q,c(i.msjErrEmail),1)):p("",!0)]),e("div",W,[X,d(e("input",{type:"text",name:"user","onUpdate:modelValue":s[9]||(s[9]=t=>i.userRegister=t),onBlur:s[10]||(s[10]=(...t)=>n.validationUser&&n.validationUser(...t)),class:h({isError:i.msjErrUser})},null,34),[[g,i.userRegister]]),i.msjErrUser?(m(),u("p",$,c(i.msjErrUser),1)):p("",!0)]),e("div",ss,[es,d(e("input",{type:"password",name:"pass","onUpdate:modelValue":s[11]||(s[11]=t=>i.passRegister=t),onBlur:s[12]||(s[12]=(...t)=>n.validationPass&&n.validationPass(...t)),class:h({isError:i.msjErrPass})},null,34),[[g,i.passRegister]]),i.msjErrPass?(m(),u("p",is,c(i.msjErrPass),1)):p("",!0)]),e("div",ts,[rs,d(e("input",{type:"password",name:"pass","onUpdate:modelValue":s[13]||(s[13]=t=>i.rPassRegister=t),onInput:s[14]||(s[14]=(...t)=>n.validationPass&&n.validationPass(...t)),class:h({isError:i.msjErrPass2})},null,34),[[g,i.rPassRegister]]),i.msjErrPass2?(m(),u("p",os,c(i.msjErrPass2),1)):p("",!0)]),e("div",ns,[d(e("input",{type:"checkbox",name:"terms","onUpdate:modelValue":s[15]||(s[15]=t=>i.checkbox=t),id:"terms"},null,512),[[y,i.checkbox]]),ls]),e("div",as,[e("button",{type:"button",class:h(["btn",{success:i.registrationCompleted}]),onClick:s[16]||(s[16]=(...t)=>n.register&&n.register(...t)),disabled:!n.validationRegister},c(i.msjBtn),11,ms)]),e("div",us,[hs,e("a",{onClick:s[17]||(s[17]=(...t)=>n.toLogin&&n.toLogin(...t))},"Inicia Sesión!")])],4),e("div",{class:"container-info",style:E({right:i.xOffset+"%",boxShadow:i.shadow})},ps,4),e("div",{class:"background",style:E({right:i.xOffset+"%"})},[(m(),u(P,null,U(100,t=>e("div",{key:t,class:h(["box",{animate:i.animatedBoxes.includes(t)}])},null,2)),64))],4)])])}const fs=_(O,[["render",gs],["__scopeId","data-v-fe80fe68"]]);export{fs as default};
