import{N,_ as y}from"./android-chrome-B-192x192-4517b689.js";import{_ as k,r as p,o as l,c as a,a as t,b as v,w,n as _,F as f,e as u,t as r,k as h,p as S,g as A}from"./index-b58b0c5a.js";const x={data(){return{classActive:"active",onStyle:"all",allNotifications:[],likesNoti:[],followedNoti:[]}},methods:{calculateTimeAgo(e){const s=new Date,n=new Date(e),d=s-n,i=Math.floor(d/(1e3*60));return i<60?`${i} min`:i<1440?`${Math.floor(i/60)} h`:`${Math.floor(i/1440)} d`},visited(e){e==="all"?this.onStyle=e:e==="mg"?this.onStyle=e:this.onStyle=e},getAllNotification(){const e=this.$store.state.user;fetch(`http://localhost:5000/notifications/${e}`).then(s=>{if(s.ok)return s.json();throw new Error("Error en la solicitud.")}).then(s=>{this.allNotifications=s.sort((n,d)=>{const i=new Date(n.fecha_notificacion);return new Date(d.fecha_notificacion)-i}),this.likesNoti=this.allNotifications.filter(n=>n.tipo==="like"),this.followedNoti=this.allNotifications.filter(n=>n.tipo==="follow"),this.allNotifications.forEach(n=>{n.img_perfil="data:image/jpeg;base64,"+n.img_perfil})}).catch(s=>{console.error("Error: ",s)})}},mounted(){this.getAllNotification()},components:{Nav:N}},b=e=>(S("data-v-3457dc3f"),e=e(),A(),e),D={class:"wrapper"},C={class:"container"},T={class:"logo"},B=b(()=>t("img",{src:y,alt:"imagen logo"},null,-1)),E={class:"main"},V={class:"nav-noti"},I={key:0,class:"container-noti"},M={class:"box img"},j=["src"],F={class:"box data"},z={class:"time"},G={key:1,class:"container-noti"},L={class:"box img"},q=["src"],H={class:"box data"},J={class:"time"},K={key:2,class:"container-noti"},O={class:"box img"},P=["src"],Q={class:"box data"},R={class:"time"};function U(e,s,n,d,i,c){const g=p("Nav"),m=p("router-link");return l(),a("div",D,[t("div",C,[v(g),t("div",T,[v(m,{to:{name:"home"}},{default:w(()=>[B]),_:1})]),t("main",E,[t("div",V,[t("span",{onClick:s[0]||(s[0]=o=>c.visited("all")),class:_({active:i.onStyle==="all"})},"Todas",2),t("span",{onClick:s[1]||(s[1]=o=>c.visited("mg")),class:_({active:i.onStyle==="mg"})},"Me Gustas",2),t("span",{onClick:s[2]||(s[2]=o=>c.visited("follow")),class:_({active:i.onStyle==="follow"})},"Seguimientos",2)]),i.onStyle==="all"?(l(),a("div",I,[(l(!0),a(f,null,u(i.allNotifications,o=>(l(),a("div",{class:"noti",key:o.id},[t("div",M,[t("img",{src:o.img_perfil,alt:"foto perfil"},null,8,j)]),t("div",F,[t("p",null,[t("span",null,"@"+r(o.user_emisor),1),h(" "+r(o.contenido),1)])]),t("div",z,[t("p",null,r(c.calculateTimeAgo(o.fecha_notificacion)),1)])]))),128))])):i.onStyle==="mg"?(l(),a("div",G,[(l(!0),a(f,null,u(i.likesNoti,o=>(l(),a("div",{class:"noti",key:o.id},[t("div",L,[t("img",{src:o.img_perfil,alt:"foto perfil"},null,8,q)]),t("div",H,[t("p",null,[t("span",null,"@"+r(o.user_emisor),1),h(" "+r(o.contenido),1)])]),t("div",J,[t("p",null,r(c.calculateTimeAgo(o.fecha_notificacion)),1)])]))),128))])):(l(),a("div",K,[(l(!0),a(f,null,u(i.followedNoti,o=>(l(),a("div",{class:"noti",key:o.id},[t("div",O,[t("img",{src:o.img_perfil,alt:"foto perfil"},null,8,P)]),t("div",Q,[t("p",null,[t("span",null,"@"+r(o.user_emisor),1),h(" "+r(o.contenido),1)])]),t("div",R,[t("p",null,r(c.calculateTimeAgo(o.fecha_notificacion)),1)])]))),128))]))])])])}const Y=k(x,[["render",U],["__scopeId","data-v-3457dc3f"]]);export{Y as default};
